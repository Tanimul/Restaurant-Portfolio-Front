<!DOCTYPE html>
<html>
  <head>
    <title>Admin slider</title>

    <!-- Include Tailwind CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.7/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100">
    <div class="flex h-screen">
      <div
        id="navbar"
        class="w-1/6 bg-gray-900 text-gray-100 transition-all duration-300 ease-in-out transform"
      >
        <div class="p-4">
          <h1 class="text-2xl font-semibold mb-4">Admin slider</h1>
          <nav>
            <a
              href="#"
              class="block py-2 px-4 rounded hover:bg-gray-800"
              data-page="slider"
              >Slider</a
            >
            <a
              href="#"
              class="block py-2 px-4 rounded hover:bg-gray-800"
              data-page="menus"
              >Menus</a
            >
            <a
              href="#"
              class="block py-2 px-4 rounded hover:bg-gray-800"
              data-page="gallary"
              >Gallary</a
            >
            <a
              href="#"
              class="block py-2 px-4 rounded hover:bg-gray-800"
              data-page="contract"
              >Contract</a
            >
            <a
              href="#"
              class="block py-2 px-4 rounded hover:bg-gray-800"
              data-page="about"
              >About</a
            >
          </nav>
        </div>
      </div>

      <div class="flex-1 p-8">
        <div class="bg-white rounded-lg shadow p-8" id="content">
          <div class="mb-8">
            <h1 class="text-3xl font-semibold">
              Welcome to the Admin Dashboard
            </h1>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Define page templates
      const templates = {
        slider: `
        <div class="mb-8">
          <div class="max-w-5xl mx-auto bg-white p-6 rounded-md shadow">
            <h2 class="text-2xl font-bold mb-4">Drag and Drop Image Upload</h2>

            <div
              id="dropzone"
              class="relative border-2 border-dashed border-gray-300 h-48 flex items-center justify-center outline-none hover:border-gray-600"
            >
              <label
                for="file-input"
                class="absolute inset-0 flex items-center justify-center cursor-pointer"
              >
                <span class="text-gray-400">Click or Drag & Drop to upload</span>
                <input id="file-input" type="file" class="hidden" />
              </label>
            </div>

            <button
              id="add-more-btn"
              class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mt-4 ml-auto"
            >
              Add More
            </button>
          </div>

          <div class="max-w-5xl mx-auto bg-white mt-6 px-6 rounded-md shadow">
            <div id="preview" class="hidden">
              <h3 class="text-lg font-bold mt-4">Preview:</h3>
              <div
                id="image-preview-container"
                class="flex flex-wrap items-center justify-center"
              ></div>
            </div>
          </div>
        </div>
      `,
        menus: `
        <div class="mb-8">
          <h1 class="text-3xl font-semibold">menus</h1>
          <p class="text-gray-600">Manage menus here.</p>
        </div>
      `,
        gallary: `
        <div class="mb-8">
          <h1 class="text-3xl font-semibold">gallary</h1>
          <p class="text-gray-600">Manage gallary here.</p>
        </div>
      `,
        contract: `
        <div class="mb-8">
          <h1 class="text-3xl font-semibold">contract</h1>
          <p class="text-gray-600">View and process contract here.</p>
        </div>
      `,
        about: `
        <div class="mb-8">
          <h1 class="text-3xl font-semibold">about</h1>
          <p class="text-gray-600">Configure about here.</p>
        </div>
      `,
      };

      // Handle navigation clicks
      const navLinks = document.querySelectorAll("nav a");
      navLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const page = e.target.dataset.page;
          updateContent(page);
          history.pushState({ page }, "", `#${page}`);
        });
      });

      // Update the content
      function updateContent(page) {
        const contentContainer = document.getElementById("content");
        contentContainer.innerHTML = templates[page];

        // Call the necessary functions for the updated content
        if (page === "slider") {
          setupImageUpload();
        }
      }

      // Handle back and forward navigation
      window.addEventListener("popstate", (e) => {
        const page = e.state ? e.state.page : "slider";
        updateContent(page);
      });

      // Setup image upload
      function setupImageUpload() {
        const dropzone = document.getElementById("dropzone");
        const fileInput = document.getElementById("file-input");
        const preview = document.getElementById("preview");
        const imagePreviewContainer = document.getElementById(
          "image-preview-container"
        );
        const addMoreBtn = document.getElementById("add-more-btn");

        dropzone.addEventListener("dragover", (e) => {
          e.preventDefault();
          dropzone.classList.add("border-indigo-600");
        });

        dropzone.addEventListener("dragleave", () => {
          dropzone.classList.remove("border-indigo-600");
        });

        dropzone.addEventListener("drop", (e) => {
          e.preventDefault();
          dropzone.classList.remove("border-indigo-600");

          const file = e.dataTransfer.files[0];
          displayImage(file);
        });

        fileInput.addEventListener("change", () => {
          const file = fileInput.files[0];
          displayImage(file);
        });

        addMoreBtn.addEventListener("click", () => {
          fileInput.value = "";
          fileInput.click();
        });

        function displayImage(file) {
          const reader = new FileReader();

          reader.onload = () => {
            const imagePreviewWrapper = document.createElement("div");
            imagePreviewWrapper.classList.add(
              "flex-col",
              "items-center",
              "mb-4"
            );

            const imagePreview = document.createElement("img");
            imagePreview.src = reader.result;
            imagePreview.classList.add(
              "max-w-32",
              "max-h-48",
              "mt-4",
              "mr-4",
              "rounded"
            );

            const deleteBtn = document.createElement("button");
            deleteBtn.innerHTML = '<i class="fas fa-trash text-red-500"></i>';
            deleteBtn.classList.add(
              "p-2",
              "rounded",
              "border",
              "border-red-500",
              "mt-2"
            );
            deleteBtn.addEventListener("click", () => {
              deleteImage(imagePreviewWrapper);
            });

            const updateInput = document.createElement("input");
            updateInput.type = "file";
            updateInput.classList.add("hidden");
            updateInput.addEventListener("change", () => {
              updateImage(updateInput, imagePreview);
            });

            const updateBtn = document.createElement("button");
            updateBtn.innerHTML = '<i class="fas fa-upload text-blue-500"></i>';
            updateBtn.classList.add(
              "p-2",
              "rounded",
              "border",
              "border-blue-500",
              "cursor-pointer",
              "mt-2",
              "float-right",
              "mr-4"
            );
            updateBtn.addEventListener("click", () => {
              updateInput.click();
            });

            imagePreviewWrapper.appendChild(imagePreview);
            imagePreviewWrapper.appendChild(deleteBtn);
            imagePreviewWrapper.appendChild(updateInput);
            imagePreviewWrapper.appendChild(updateBtn);

            imagePreviewContainer.appendChild(imagePreviewWrapper);
            preview.classList.remove("hidden");
          };

          reader.readAsDataURL(file);
        }

        function deleteImage(imagePreviewWrapper) {
          imagePreviewWrapper.remove();

          if (imagePreviewContainer.childElementCount === 0) {
            preview.classList.add("hidden");
          }
        }

        function updateImage(updateInput, imagePreview) {
          const file = updateInput.files[0];
          const reader = new FileReader();

          reader.onload = () => {
            imagePreview.src = reader.result;
          };

          reader.readAsDataURL(file);
        }
      }
    </script>
  </body>
</html>
